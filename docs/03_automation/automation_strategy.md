# LogiShift 自動化戦略 (Automation Strategy)

## 1. ビジョン (Vision)
**「世界と日本の物流最前線を、独自の視点で紐解くインテリジェンス・ハブ」**

単なるニュースの翻訳や転載ではなく、LogiShiftとしての「解釈」「示唆」が付加された、経営層・担当者の意思決定に資するコンテンツを構築する。

## 2. エディトリアル・ペルソナ (Editorial Persona)
AIは以下のキャラクター設定に基づいて記事を生成する。

*   **キャラクター**: **「最新テックに明るいDXエバンジェリスト」**
*   **視点**:
    *   **コスト削減・実現可能性**: 現場で実際に使えるか？ 利益につながるか？ をシビアに評価。
    *   **未来への可能性**: 現時点ではコスト高でも、将来的に物流を変えるポテンシャルがあるかを評価。
*   **トーン＆マナー**:
    *   専門用語を適切に使いつつ、経営層にも分かりやすく解説。
    *   単なる事実の羅列ではなく、「なぜ重要か」「どう活かすべきか」を語る。

## 3. コンテンツ生成方針 (Content Policy)
*   **情報ソース**:
    *   **厳選**: 内容が薄いサイトは除外。信頼性が高く、情報量の多いサイト（TechCrunch, WSJ, 専門誌など）を選定。
    *   **収集**: Geminiのクローリング機能を活用し、広範囲から良質な情報を収集。
*   **記事構成**:
    *   **全訳禁止**: 著作権リスクを回避するため、原文の「意訳（要約）」をベースにする。
    *   **独自コメント**: 記事の各セクションまたは末尾に、LogiShiftとしての考察（DXエバンジェリスト視点）を必ず挿入。
    *   **内部リンク連携**: LogiShiftの過去記事（関連する解説や事例）へのリンクを積極的に提案し、サイト内の回遊性を高める。

## 4. ロードマップ (Roadmap)

### Phase 1: "The Writer" (キーワード指定型・自動生成) - **✅ Completed**
**目的**: 品質の基準作りとプロンプトのチューニング。
*   **実績**:
    1.  人間が「キーワード」を指定。
    2.  Geminiが構成案作成から執筆までを一貫して実行。
    3.  WordPressに「下書き」または「予約投稿」として保存。
    4.  MarkdownからHTMLへの自動変換、アイキャッチ画像の自動設定（No Image対応）も実装済み。

### Phase 2: "The Collector" (収集・選別の自動化) - **✅ Completed**
**目的**: ネタ探しの効率化とトレンドへの即応。
*   **実績**:
    1.  **Feeder**: RSSや特定サイトのSitemapから最新記事URLを収集。
    2.  **Scorer**: 収集した記事が「LogiShiftのペルソナ」に合致するかをGeminiでスコアリング。
    3.  **Filter**: 一定スコア以上の記事のみを抽出し、JSON出力。
*   **現状**: 手動運用中。毎朝コマンドを実行し、高スコア記事を確認。

### Phase 2.5: "The Pipeline" (収集→生成の完全自動化) - **🔮 Future**
**目的**: 高スコア記事から自動で下書きを生成し、完全自律運用を実現。

> [!IMPORTANT]
> Phase 2.5は段階的に実装します。まずは記事品質の向上（2.5-A）を優先し、その後SEO最適化（2.5-B）、最後に運用自動化（2.5-C）へと進めます。

#### Phase 2.5-A: URL Reader + Summarizer - **🎯 最優先**
**目的**: 元記事の内容を正確に反映させ、ハルシネーション（事実誤認）を防ぐ。

**実装内容:**
1. **URL Reader**: 高スコア記事の元URLから本文を抽出
   - BeautifulSoupによるスクレイピング、またはGeminiのURL読み込み機能を使用
   - 主要なニュースサイトのHTML構造に対応
2. **Summarizer**: 元記事を要約し、重要な事実を抽出
   - Geminiに「要約」「重要な数値・固有名詞」「主要な主張」を抽出させる
   - LogiShift視点のコメント（DXエバンジェリストとしての解釈）を付加
3. **Context Injection**: `generate_article.py` を改修
   - 抽出した情報を `context` としてプロンプトに含める
   - 「以下の事実に基づいて記事を書いてください」という指示に変更

**期待効果:**
- 具体的な数値や事例を含む、信頼性の高い記事が生成される
- 「タイトルから推測」による一般論記事から脱却
- ニュース解説・海外トレンド記事の品質が大幅に向上

#### Phase 2.5-B: Internal Link Suggester - **次のステップ**
**目的**: 内部リンク最適化によるSEO強化とサイト回遊性の向上。

**実装内容:**
1. **WordPress記事取得**: WordPress APIから既存記事のタイトル・URL・抜粋を取得
2. **関連性スコアリング**: Geminiで新規記事と既存記事の関連性を評価（0-100点）
3. **リンク自動挿入**: 高関連度（80点以上）の記事へのリンクを本文に自動挿入
4. **双方向リンク**: 既存記事にも逆リンクを追加（要慎重な設計）

**注意点:**
- 既存記事の自動編集はリスクがあるため、まずは「新規記事→既存記事」の一方向リンクから開始
- 逆リンク機能は人間のレビュー後に実装を検討

#### Phase 2.5-C: Automation & Notification - **最後**
**目的**: 完全自律運用の実現。

**実装内容:**
1. **スケジュール実行**: cron/GitHub Actionsで毎朝8:00に自動実行
2. **Slack通知**: 「○件の下書きを作成しました」と通知
3. **エラーハンドリング**: 失敗時のリトライ・ログ記録

**運用イメージ:**
- 毎朝8:00に自動実行
- 高スコア記事（85点以上）を自動で下書き化
- 人間は最終チェック＆公開のみ

### Phase 3: "The Synthesizer" (週次・月次レポート)
**目的**: ストック情報の資産化。
*   **フロー**:
    1.  蓄積された記事データを分析。
    2.  「今週の物流テック動向」などのまとめ記事を自動生成。

## 5. Phase 1 実装実績 (Completed Implementation)
キーワードを入力するだけで、SEOを意識した記事を生成し、WordPressへ投稿するCLIツールを構築しました。

### 実装された機能
1.  **Article Generator (`generate_article.py`)**:
    *   キーワードに基づき、タイトル・構成案・本文をステップバイステップで生成。
    *   Gemini 1.5 Pro/Flash を活用し、4,000文字程度の充実したコンテンツを作成。
2.  **WordPress Integrator (`wp_client.py`)**:
    *   Application Passwords認証を用いたREST API連携。
    *   投稿ステータス（draft/future）の制御。
3.  **Content Formatter**:
    *   MarkdownからHTMLへのクリーンな変換。
    *   H2/H3タグの適切な構造化。

## 6. Phase 2 実装計画 (Next Steps)
「自ら情報を探しに行き、選別する」機能を追加し、完全自動化への布石を打ちます。

### 開発予定のコンポーネント
1.  **RSS/Sitemap Crawler (`collector.py`)**:
    *   主要な物流ニュースサイト、テックブログのRSSを定期巡回。
    *   未処理のURLをデータベース（またはJSONファイル）にストック。
2.  **Relevance Scorer (`scorer.py`)**:
    *   記事のタイトルと冒頭文（リード）をGeminiに投げ、以下の基準で0-100点のスコアを付与。
        *   物流業界へのインパクト
        *   DX/テクノロジー要素の有無
        *   読者（経営層・現場管理者）への有益性
3.  **Pipeline Manager**:
    *   `Collector` -> `Scorer` -> (80点以上) -> `Generator` という一連の流れを制御。

### 実行方法 (Execution Method)
まずは手動実行から開始し、安定稼働後に自動化へ移行します。

1.  **Step 1: 手動実行 (Manual CLI)**
    *   **コマンド**: `python automation/collector.py --source "techcrunch,wsj"`
    *   **運用**: 毎朝、担当者がコマンドを叩いてニュースを収集・選別し、生成された下書きを確認する。
    *   **目的**: 選別ロジック（スコアリング）の精度を目視で確認・調整するため。

2.  **Step 2: 自動実行 (Scheduled Automation)**
    *   **ツール**: `cron` (Mac/Linux) または GitHub Actions (Schedule Event)。
    *   **運用**: 毎日AM 8:00に自動実行。Slack等に「○件の記事を下書き保存しました」と通知。
    *   **目的**: 完全な自律運用。
